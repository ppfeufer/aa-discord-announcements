$(document).ready(()=>{"use strict";const n=$("select#id_announcement_target"),s=$("select#id_announcement_channel"),a=$('input[name="csrfmiddlewaretoken"]'),t=$('textarea[name="announcement_text"]'),o=$("#aa-discord-announcements-form"),c=(e,n=10)=>{$(e).fadeTo(1e3*n,500).slideUp(500,e=>{$(e).slideUp(500,e=>{$(e).remove()})})},r=(e,n)=>{$(n).html('<div class="alert alert-success alert-dismissable alert-message-success"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+e+"</div>"),c(".alert-message-success")},d=(e,n)=>{$(n).html('<div class="alert alert-danger alert-dismissable alert-message-error"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+e+"</div>"),c(".alert-message-error",9999)};o.submit(e=>{if(e.preventDefault(),$(".aa-discord-announcements-form-message div").remove(),[t.val()].includes(""))return d(discordAnnouncementsTranslations.error.missingFields,".aa-discord-announcements-form-message"),!1;e=o.serializeArray().reduce((e,n)=>(e[n.name]=n.value,e),{});$.ajax({url:discordAnnouncementsSettings.url.createAnnouncement,type:"post",data:e,headers:{"X-CSRFToken":a.val()},success:e=>{!0===e.success?($(".aa-discord-announcements-no-announcement").hide("fast"),$(".aa-discord-announcements-announcement").show("fast"),$(".aa-discord-announcements-announcement-text").html(e.announcement_context),e.message&&r(e.message,".aa-discord-announcements-form-message")):e.message?d(e.message,".aa-discord-announcements-form-message"):d("Something went wrong, no details given.",".aa-discord-announcements-form-message")}})}),$("button#copyDiscordAnnouncement").on("click",()=>{{const n=new ClipboardJS("button#copyDiscordAnnouncement");n.on("success",e=>{r(discordAnnouncementsTranslations.copyToClipboard.success,".aa-discord-announcements-announcement-copyresult"),e.clearSelection(),n.destroy()}),n.on("error",()=>{d(discordAnnouncementsTranslations.copyToClipboard.error,".aa-discord-announcements-announcement-copyresult"),n.destroy()})}}),$.ajax({url:discordAnnouncementsSettings.url.getAnnouncementTargets,success:e=>{$(n).html(e)}}),$.ajax({url:discordAnnouncementsSettings.url.getAnnouncementWebhooks,success:e=>{$(s).html(e)}})});
//# sourceMappingURL=aa-discord-announcements.min.js.map